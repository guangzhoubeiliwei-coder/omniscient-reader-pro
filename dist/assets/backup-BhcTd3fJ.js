import{S as t}from"./index-6P7FbrcN.js";import"./ui-vendor-fwYxYxrl.js";import"./react-vendor-CicYosMR.js";const i="2.0.0";async function a(){const e=await t.getItem("items")||[],r=await t.getItem("history")||[],s=await t.getItem("genres")||[];return{version:i,exportedAt:Date.now(),items:e,history:r,genres:s}}async function y(e){try{return!e.version||!e.items||!e.history||!e.genres?{success:!1,error:"Invalid backup format"}:!Array.isArray(e.items)||!Array.isArray(e.history)||!Array.isArray(e.genres)?{success:!1,error:"Invalid data structure"}:(await t.setItem("items",e.items),await t.setItem("history",e.history),await t.setItem("genres",e.genres),{success:!0})}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async function l(){const e=await a(),r=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=URL.createObjectURL(r),n=document.createElement("a");n.href=s;const o=new Date().toISOString().split("T")[0];n.download=`omniscient-reader-backup-${o}.json`,n.click(),URL.revokeObjectURL(s)}export{l as downloadBackup,a as exportData,y as importData};
